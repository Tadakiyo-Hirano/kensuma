<%= render 'shared/error_massages', object: f.object %>

<!-- 下請会社 -->
<div class="list-group-item">
  <div style="font-size: 22px; font-weight: bold;"><%= f.label :subcontractor %></div> <!-- 下請会社 -->
    <div class="list-group-item">
      <div style="font-weight: bold;"><%= f.label :request_order_infomation %></div> <!-- 現場情報 -->
      <div class="list-group-item">
        <%= f.label :construction_name %> <!-- 工事名 -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.text_field :construction_name, class: "form-control", placeholder: RequestOrder.human_attribute_name(:construction_name) %>
        <br>
        <%= f.label :construction_details %> <!-- 工事内容 -->
        <%= f.text_field :construction_details, class: "form-control", placeholder: RequestOrder.human_attribute_name(:construction_details) %>
        <br>
        <%= f.label :start_date %> <!-- 工期(自) -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.date_field :start_date, class: "form-control" %>
        <br>
        <%= f.label :end_date %> <!-- 工期(至) -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.date_field :end_date, class: "form-control" %>
        <br>
        <%= f.label :contract_date %> <!-- 契約日 -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.date_field :contract_date, class: "form-control" %>
        <br>
      </div>
    <div class="list-group-item">
      <div style="font-weight: bold;"><%= f.label :site_agent %></div> <!-- 現場代理人 -->
      <div class="list-group-item">
        <%= f.label :site_agent_name %> <!-- 氏名 -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.select :site_agent_name, @business_workers_name.uniq,
                      { include_blank: true },
                      { class: "form-select form-select-sm", style: "width: 100%" }
        %><br>
        <%= f.label :site_agent_apply %> <!-- 権限及び意見の申出方法 -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.text_field :site_agent_apply, class: "form-control", placeholder: Order.human_attribute_name(:site_agent_apply) %>
        <br>
      </div>
    </div>
    <div class="list-group-item">
      <div style="font-weight: bold;"><%= f.label :supervisor %></div> <!-- 監督員 -->
      <div class="list-group-item">
        <%= f.label :supervisor_name %> <!-- 氏名 -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.select :supervisor_name, @business_workers_name.uniq,
                      { include_blank: true },
                      { class: "form-select form-select-sm", style: "width: 100%" }
        %><br>
        <%= f.label :supervisor_apply %> <!-- 権限及び意見の申出方法 -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.text_field :supervisor_apply, class: "form-control", placeholder: Order.human_attribute_name(:supervisor_apply) %>
        <br>
      </div>
    </div>
    <div class="list-group-item">
      <div style="font-weight: bold;"><%= f.label :professional_engineer %></div> <!-- 専門技術者 -->
      <div class="list-group-item">
        <%= f.label :professional_engineer_name %> <!-- 氏名 -->
        <%= f.select :professional_engineer_name, @business_workers_name.uniq,
                      { include_blank: true },
                      { class: "form-select form-select-sm", style: "width: 100%" }
        %><br>
        <%= f.label :professional_engineer_details %> <!-- 担当工事内容 -->
        <%= f.text_field :professional_engineer_details, class: "form-control", placeholder: RequestOrder.human_attribute_name(:professional_engineer_details) %>
        <br>
        <%= f.label :professional_engineer_skill_training_id %> <!-- 資格内容 -->
        <%= f.collection_select( :professional_engineer_qualification, SkillTraining.all, :id, :name,
                                options = { include_blank: true, selected: skill_id_value("professional") },
                                { class: "single-select", style: "width: 100%" })
        %><br><br>
      </div>
    </div>
    <div class="list-group-item">
      <div style="font-weight: bold;"><%= f.label :professional_construction %></div> <!-- 特定専門工事 -->
      <div class="list-group-item">
        <%= f.collection_radio_buttons(:professional_construction, RequestOrder.professional_constructions_i18n, :first, :last, item_wrapper_class: 'radio-button-item') do |b| %>
          <%= b.label(class: 'radio-button-label') { b.radio_button + ' ' + b.text } %><br>
        <% end %>
      </div>
    </div>
    <div class="list-group-item">
      <div style="font-weight: bold;"><%= f.label :construction_manager %></div> <!-- 工事担当責任者 -->
      <div class="list-group-item">
        <%= f.label :construction_manager_name %> <!-- 氏名 -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.select :construction_manager_name, @business_workers_name.uniq,
                      { include_blank: true },
                      { class: "form-select form-select-sm", style: "width: 100%" }
        %><br>
      </div>
    </div>
    <div class="list-group-item">
      <div style="font-weight: bold;"><%= f.label :lead_engineer %></div> <!-- 主任技術者 -->
      <div class="list-group-item">
        <%= f.label :lead_engineer_name %> <!-- 氏名 -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
        <%= f.select :lead_engineer_name, @business_workers_name.uniq,
                      { include_blank: true },
                      { class: "form-select form-select-sm", style: "width: 100%" }
        %><br>
        <%= f.label :lead_engineer_check %> <!-- 専任・非専任 -->
        <span class="p-1 mb-2 rounded bg-danger text-white">必須</span><br>
        <div class="list-group-item">
          <%= f.collection_radio_buttons(:lead_engineer_check, RequestOrder.lead_engineer_checks_i18n, :first, :last, item_wrapper_class: 'radio-button-item') do |b| %>
            <%= b.label(class: 'radio-button-label') { b.radio_button + ' ' + b.text } %><br>
          <% end %>
        </div><br>
        <%= f.label :lead_engineer_qualification %> <!-- 資格内容 -->
        <%= f.collection_select :lead_engineer_qualification,
                                SkillTraining.all, :id, :name,
                                options = { include_blank: true},
                                { class: "single-select", style: "width: 100%" }
        %><br><br>
      </div>
    </div>
    <div class="list-group-item">
      <%= f.label :work_chief_name %> <!-- 作業主任者名 -->
      <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
      <%= f.select :work_chief_name, @business_workers_name.uniq,
                    { include_blank: true },
                    { class: "form-select form-select-sm", style: "width: 100%" }
      %><br>
    </div>
    <div class="list-group-item">
      <%= f.label :work_conductor_name %> <!-- 作業指揮者名 -->
      <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
      <%= f.select :work_conductor_name, @business_workers_name.uniq,
                    { include_blank: true },
                    { class: "form-select form-select-sm", style: "width: 100%" }
      %>
      <br>
    </div>
    <div class="list-group-item">
      <%= f.label :safety_officer_name %> <!-- 安全衛生担当責任者名 -->
      <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
      <%= f.select :safety_officer_name, @business_workers_name.uniq,
                    { include_blank: true },
                    { class: "form-select form-select-sm", style: "width: 100%" }
      %><br>
    </div>
    <div class="list-group-item">
      <%= f.label :safety_manager_name %> <!-- 安全衛生責任者名 -->
      <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
      <%= f.select :safety_manager_name, @business_workers_name.uniq,
                    { include_blank: true },
                    { class: "form-select form-select-sm", style: "width: 100%" }
      %><br>
    </div>
    <div class="list-group-item">
      <%= f.label :safety_promoter_name %> <!-- 安全推進者名 -->
      <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
      <%= f.select :safety_promoter_name, @business_workers_name.uniq,
                        { include_blank: true },
                        { class: "form-select form-select-sm", style: "width: 100%" }
      %><br>
    </div>
    <div class="list-group-item">
      <%= f.label :foreman_name %> <!-- 職長名 -->
      <span class="p-1 mb-2 rounded bg-danger text-white">必須</span>
      <%= f.select :foreman_name, @business_workers_name.uniq,
                        { include_blank: true },
                        { class: "form-select form-select-sm", style: "width: 100%" }
      %><br>
    </div>
    <div class="list-group-item">
      <div style="font-weight: bold;"><%= f.label :registered_core_engineer %></div> <!-- 登録基幹技能者 -->
      <div class="list-group-item">
        <%= f.label :registered_core_engineer_name %> <!-- 氏名 -->
        <%= f.select :registered_core_engineer_name, @business_workers_name.uniq,
                          { include_blank: true },
                          { class: "form-select form-select-sm", style: "width: 100%" }
        %><br>
        <%= f.label :registered_core_engineer_qualification %> <!-- 資格内容 -->
        <%= f.collection_select :registered_core_engineer_qualification,
                              License.all, :id, :name,
                              options = { include_blank: true},
                              { class: "single-select", style: "width: 100%" }
        %><br><br>
      </div>
    </div>
    <div class="list-group-item">
      <%= f.label :construction_license_status %>
    </div>
  </div>
</div>
<br>

<script>
  // 入力フォームのバリデーション
  $(function(){
    $.each(function(key){
      $.validator.addMethod(key, this);
    });
    $(".order-form-validation").validate({
      rules: {
        "request_order[construction_name]": {
          required: true
        },
        "request_order[construction_details]": {
          required: true
        },
        "request_order[start_date]": {
          required: true
        },
        "request_order[end_date]": {
          required: true
        },
        "request_order[contract_date]": {
          required: true
        },
        "request_order[supervisor_name]": {
          required: true
        },
        "request_order[supervisor_apply]": {
          required: true
        },
        "request_order[construction_manager_name]": {
          required: true
        },
        "request_order[construction_manager_position_name]": {
          required: true
        },
        "request_order[site_agent_name]": {
          required: true
        },
        "request_order[site_agent_apply]": {
          required: true
        },
        "request_order[lead_engineer_name]": {
          required: true
        },
        "request_order[lead_engineer_check]": {
          required: true
        },
        "request_order[work_chief_name]": {
          required: true
        },
        "request_order[work_conductor_name]": {
          required: true
        },
        "request_order[safety_officer_name]": {
          required: true
        },
        "request_order[safety_manager_name]": {
          required: true
        },
        "request_order[safety_promoter_name]": {
          required: true
        },
        "request_order[foreman_name]": {
          required: true
        },
      },
      messages: {
        "request_order[construction_name]": {
          required: "工事名を入力してください。"
        },
        "request_order[construction_details]": {
          required: "工事内容を入力してください。"
        },
        "request_order[start_date]": {
          required: "工期(自)を入力してください。"
        },
        "request_order[end_date]": {
          required: "工期(至)を入力してください。"
        },
        "request_order[contract_date]": {
          required: "契約日を入力してください。"
        },
        "request_order[supervisor_name]": {
          required: "監督員名を入力してください。"
        },
        "request_order[supervisor_apply]": {
          required: "権限及び意見の申出方法を入力してください。"
        },
        "request_order[construction_manager_name]": {
          required: "工事担任責任者名を入力してください。"
        },
        "request_order[construction_manager_position_name]": {
          required: "工事担任責任者の役職名を入力してください。"
        },
        "request_order[site_agent_name]": {
          required: "現場代理人名を入力してください。"
        },
        "request_order[site_agent_apply]": {
          required: "権限及び意見の申出方法を入力してください。"
        },
        "request_order[lead_engineer_name]": {
          required: "主任技術者名を入力してください。"
        },
        "request_order[lead_engineer_check]": {
          required: "専任or非専任を選択してください。"
        },
        "request_order[work_chief_name]": {
          required: "作業主任者名を入力してください。"
        },
        "request_order[work_conductor_name]": {
          required: "作業指揮者名を入力してください。"
        },
        "request_order[safety_officer_name]": {
          required: "安全衛生担当責任者名を入力してください。"
        },
        "request_order[safety_manager_name]": {
          required: "安全衛生責任者名を入力してください。"
        },
        "request_order[safety_promoter_name]": {
          required: "安全推進者名を入力してください。"
        },
        "request_order[foreman_name]": {
          required: "職長名を入力してください。"
        },
      },
      errorClass: "input_form_error"
    });
    // 入力欄を変更したときにバリデーションを実行
    $(".order-form-validation").change(function () {
      $(this).valid();
    });
  });
</script>
